extends layout

block content
  link(rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.9/c3.min.css')
  h1.center-text= survey.question
  div.chart
  script(src='//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js')
  script(src='//cdnjs.cloudflare.com/ajax/libs/c3/0.4.9/c3.min.js')
  script.
    var chart = c3.generate({
      bindto: '.chart',
      data: {
        columns: ["a", 0],
        type: 'pie'
      },
      pie: {
        label: {
          format: function (value, ratio, id) {
            return d3.format(',')(value);
          }
        }
      }
    });
    
    var loadData = function(data) {
      chart.unload({
        ids: ['a']
      });
      chart.load({
        columns: data
      });
    }
    loadData(!{data})
    
